{% extends "layout/sidebar.html" %}
{% load static %}
{% block title %}Panel Principal{% endblock %}

{% block content %}
 
  <h1 class="text-[70px] mb-2">Panel Principal</h1>
<p id="bienvenida" class="text-[25px] mb-8">¡Bienvenid@,</p>
  <p class="text-gray-600 mb-16">Última Sesión: _________ </p>
  <script></script>

<div class="grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-2 gap-8 w-full max-w-screen-lg mx-auto px-3">  
    <div class="flex items-center gap-5 bg-gray-200 rounded-xl p-6 border-2 border-gray-400 transition-transform duration-200 cursor-pointer hover:scale-105 hover:border-[#00f0ff] hover:shadow-[0_0_15px_#00f0ff]">
      <div class="w-[65px] h-[65px] rounded-full bg-white flex items-center justify-center text-[28px]">👤</div>
      <div>
        <p class="text-[25px] font-bold mb-1">12</p>
        <p>Funcionarios activos</p>
      </div>
    </div>


    <div class="flex items-center gap-5 bg-gray-200 rounded-xl p-8 transition-transform duration-200 cursor-pointer border-2 border-gray-400 hover:scale-105 hover:border-[#00f0ff] hover:shadow-[0_0_15px_#00f0ff]">
      <div class="w-[65px] h-[65px] rounded-full bg-white flex items-center justify-center text-[28px]">✉</div>
      <div>
        <p class="text-[25px] font-bold mb-1">12</p>
        <p>Cargos Registrados</p>
      </div>
    </div>


    <div class="flex items-center gap-5 bg-gray-200 rounded-xl p-8 transition-transform duration-200 cursor-pointer border-2 border-gray-400 hover:scale-105 hover:border-[#00f0ff] hover:shadow-[0_0_15px_#00f0ff]">
      <div class="w-[65px] h-[65px] rounded-full bg-white flex items-center justify-center text-[28px]">👥</div>
      <div>
        <p class="text-[25px] font-bold mb-1">7</p>
        <p>Grupos Sena</p>
      </div>
    </div>
    

    <div class="flex items-center gap-5 bg-gray-200 rounded-xl p-8 transition-transform duration-200 cursor-pointer border-2 border-gray-400 hover:scale-105 hover:border-[#00f0ff] hover:shadow-[0_0_15px_#00f0ff]">
      <div class="w-[65px] h-[65px] rounded-full bg-white flex items-center justify-center text-[28px]">📁</div>
      <div>
        <p class="text-[25px] font-bold mb-1">2</p>
        <p>Reportes Recientes</p>
      </div>
    </div>
  </div>
   <script src="{% static 'js/login.js'%}"></script>

<script>
document.addEventListener("DOMContentLoaded", async () => {
    try {
        const res = await fetch("http://127.0.0.1:8001/api/usuarios/me/", {
            method: "GET",
            headers: {
                "Content-Type": "application/json",
                "Authorization": `Bearer ${localStorage.getItem("access")}`
            }
        });

        if (!res.ok) {
            console.error("No se pudo obtener el usuario");
            return;
        }

        const data = await res.json();
        console.log("Usuario actual:", data);

        // Pintar el nombre en el <p>
        const bienvenidaNode = document.getElementById("bienvenida");
        bienvenidaNode.textContent = `¡Bienvenid@, ${data.nombre}!`;

    } catch (error) {
        console.error("Error al cargar usuario:", error);
    }
});
</script>

{% endblock %}
